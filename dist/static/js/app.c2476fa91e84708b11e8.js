webpackJsonp([1],{JZSy:function(e,t){throw new Error("Module build failed: SyntaxError: Unexpected token (36:8)\n\n[0m [90m 34 | [39m    }[33m,[39m\n [90m 35 | [39m    computed[33m:[39m {\n[31m[1m>[22m[39m[90m 36 | [39m        [33m...[39mmapState([[32m'userProfile'[39m])\n [90m    | [39m        [31m[1m^[22m[39m\n [90m 37 | [39m    }[33m,[39m\n [90m 38 | [39m    methods[33m:[39m {\n [90m 39 | [39m        updateProfile() {[0m\n")},M93x:function(e,t,s){"use strict";var o=s("xJD8"),r=(s.n(o),s("dKg0")),n=s("VU/8")(o.default,r.a,!1,null,null,null);t.default=n.exports},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s("7+uW"),r=s("M93x"),n=s("/ocq"),a=s("Sazm"),i=s.n(a);const m=s("vX5M");var l={data:()=>({loginForm:{email:"",password:""},signupForm:{name:"",title:"",email:"",password:""},passwordForm:{email:""},showLoginForm:!0,showForgotPassword:!1,passwordResetSuccess:!1,performingRequest:!1,errorMsg:""}),methods:{toggleForm(){this.errorMsg="",this.showLoginForm=!this.showLoginForm},togglePasswordReset(){this.showForgotPassword?(this.showLoginForm=!0,this.showForgotPassword=!1,this.passwordResetSuccess=!1):(this.showLoginForm=!1,this.showForgotPassword=!0)},login(){this.performingRequest=!0,m.auth.signInWithEmailAndPassword(this.loginForm.email,this.loginForm.password).then(e=>{this.$store.commit("setCurrentUser",e),this.$store.dispatch("fetchUserProfile"),this.performingRequest=!1,this.$router.push("/dashboard")}).catch(e=>{console.log(e),this.performingRequest=!1,this.errorMsg=e.message})},signup(){this.performingRequest=!0,m.auth.createUserWithEmailAndPassword(this.signupForm.email,this.signupForm.password).then(e=>{this.$store.commit("setCurrentUser",e),m.usersCollection.doc(e.uid).set({name:this.signupForm.name,title:this.signupForm.title}).then(()=>{this.$store.dispatch("fetchUserProfile"),this.performingRequest=!1,this.$router.push("/dashboard")}).catch(e=>{console.log(e),this.performingRequest=!1,this.errorMsg=e.message})}).catch(e=>{console.log(e),this.performingRequest=!1,this.errorMsg=e.message})},resetPassword(){this.performingRequest=!0,m.auth.sendPasswordResetEmail(this.passwordForm.email).then(()=>{this.performingRequest=!1,this.passwordResetSuccess=!0,this.passwordForm.email=""}).catch(e=>{console.log(e),this.performingRequest=!1,this.errorMsg=e.message})}}},c={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"login"}},[s("transition",{attrs:{name:"fade"}},[e.performingRequest?s("div",{staticClass:"loading"},[s("p",[e._v("Cargando...")])]):e._e()]),e._v(" "),s("section",[e._m(0),e._v(" "),s("div",{staticClass:"col2",class:{"signup-form":!e.showLoginForm&&!e.showForgotPassword}},[e.showLoginForm?s("form",{on:{submit:function(e){e.preventDefault()}}},[s("h1",[e._v("Bienvenido")]),e._v(" "),s("label",{attrs:{for:"email1"}},[e._v("Email")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.loginForm.email,expression:"loginForm.email",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"Email",id:"email1"},domProps:{value:e.loginForm.email},on:{input:function(t){t.target.composing||e.$set(e.loginForm,"email",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("label",{attrs:{for:"password1"}},[e._v("ContraseÃ±a")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.loginForm.password,expression:"loginForm.password",modifiers:{trim:!0}}],attrs:{type:"password",placeholder:"******",id:"password1"},domProps:{value:e.loginForm.password},on:{input:function(t){t.target.composing||e.$set(e.loginForm,"password",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("button",{staticClass:"button",on:{click:e.login}},[e._v("Ingresar")]),e._v(" "),s("div",{staticClass:"extras"},[s("a",{on:{click:e.togglePasswordReset}},[e._v("OlvidÃ³ su contraseÃ±a?")]),e._v(" "),s("a",{on:{click:e.toggleForm}},[e._v("Crear una cuenta")])])]):e._e(),e._v(" "),e.showLoginForm||e.showForgotPassword?e._e():s("form",{on:{submit:function(e){e.preventDefault()}}},[s("h1",[e._v("Registro")]),e._v(" "),s("label",{attrs:{for:"name"}},[e._v("Nombre")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.signupForm.name,expression:"signupForm.name",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"Nombre",id:"name"},domProps:{value:e.signupForm.name},on:{input:function(t){t.target.composing||e.$set(e.signupForm,"name",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("label",{attrs:{for:"title"}},[e._v("CompaÃ±Ã­a")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.signupForm.title,expression:"signupForm.title",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"CompaÃ±Ã­a",id:"title"},domProps:{value:e.signupForm.title},on:{input:function(t){t.target.composing||e.$set(e.signupForm,"title",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("label",{attrs:{for:"email2"}},[e._v("Email")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.signupForm.email,expression:"signupForm.email",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"Email",id:"email2"},domProps:{value:e.signupForm.email},on:{input:function(t){t.target.composing||e.$set(e.signupForm,"email",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("label",{attrs:{for:"password2"}},[e._v("ContraseÃ±a")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.signupForm.password,expression:"signupForm.password",modifiers:{trim:!0}}],attrs:{type:"password",placeholder:"mÃ­nimo 6 caracteres",id:"password2"},domProps:{value:e.signupForm.password},on:{input:function(t){t.target.composing||e.$set(e.signupForm,"password",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("button",{staticClass:"button",on:{click:e.signup}},[e._v("Registrarse")]),e._v(" "),s("div",{staticClass:"extras"},[s("a",{on:{click:e.toggleForm}},[e._v("Ingresar")])])]),e._v(" "),e.showForgotPassword?s("form",{staticClass:"password-reset",on:{submit:function(e){e.preventDefault()}}},[e.passwordResetSuccess?s("div",[s("h1",[e._v("Email Enviado")]),e._v(" "),s("p",[e._v("Revise su correo para seguir con el proceso")]),e._v(" "),s("button",{staticClass:"button",on:{click:e.togglePasswordReset}},[e._v("Ingresar")])]):s("div",[s("h1",[e._v("Recuperar contraseÃ±a")]),e._v(" "),s("p",[e._v("Le enviaremos un email con su conytraseÃ±a")]),e._v(" "),s("label",{attrs:{for:"email3"}},[e._v("Email")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.passwordForm.email,expression:"passwordForm.email",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"Email",id:"email3"},domProps:{value:e.passwordForm.email},on:{input:function(t){t.target.composing||e.$set(e.passwordForm,"email",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("button",{staticClass:"button",on:{click:e.resetPassword}},[e._v("Enviar")]),e._v(" "),s("div",{staticClass:"extras"},[s("a",{on:{click:e.togglePasswordReset}},[e._v("Ingresar")])])])]):e._e(),e._v(" "),s("transition",{attrs:{name:"fade"}},[""!==e.errorMsg?s("div",{staticClass:"error-msg"},[s("p",[e._v(e._s(e.errorMsg))])]):e._e()])],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col1"},[t("h1",[this._v("PlatziPosts")]),this._v(" "),t("p",[this._v("Bienvenido a PlatziPosts, plataforma de microbloging usando Vue y Firebase")])])}]},d=s("VU/8")(l,c,!1,null,null,null).exports,u=s("TGvd"),p=s("niH5");o.a.use(n.a);const v=new n.a({mode:"history",routes:[{path:"*",redirect:"/dashboard"},{path:"/login",name:"Login",component:d},{path:"/dashboard",name:"Dashboard",component:u.default,meta:{requiresAuth:!0}},{path:"/settings",name:"Settings",component:p.default,meta:{requiresAuth:!0}}]});v.beforeEach((e,t,s)=>{const o=e.matched.some(e=>e.meta.requiresAuth),r=i.a.auth().currentUser;o&&!r?s("/login"):s()});var f=v,h=s("NYxO");const g=s("vX5M");o.a.use(h.a),g.auth.onAuthStateChanged(e=>{e&&(_.commit("setCurrentUser",e),_.dispatch("fetchUserProfile"),g.usersCollection.doc(e.uid).onSnapshot(e=>{_.commit("setUserProfile",e.data())}),g.postsCollection.orderBy("createdOn","desc").onSnapshot(e=>{let t;if(e.docs.length&&(t=_.state.currentUser.uid==e.docChanges[0].doc.data().userId),e.docChanges.length===e.docs.length||"added"!=e.docChanges[0].type||t){let t=[];e.forEach(e=>{let s=e.data();s.id=e.id,t.push(s)}),_.commit("setPosts",t)}else{let t=e.docChanges[0].doc.data();t.id=e.docChanges[0].doc.id,_.commit("setHiddenPosts",t)}}))});const _=new h.a.Store({state:{currentUser:null,userProfile:{},posts:[],hiddenPosts:[]},actions:{clearData({commit:e}){e("setCurrentUser",null),e("setUserProfile",{}),e("setPosts",null),e("setHiddenPosts",null)},fetchUserProfile({commit:e,state:t}){g.usersCollection.doc(t.currentUser.uid).get().then(t=>{e("setUserProfile",t.data())}).catch(e=>{console.log(e)})},updateProfile({commit:e,state:t},s){let o=s.name,r=s.title;g.usersCollection.doc(t.currentUser.uid).update({name:o,title:r}).then(e=>{g.postsCollection.where("userId","==",t.currentUser.uid).get().then(e=>{e.forEach(e=>{g.postsCollection.doc(e.id).update({userName:o})})}),g.commentsCollection.where("userId","==",t.currentUser.uid).get().then(e=>{e.forEach(e=>{g.commentsCollection.doc(e.id).update({userName:o})})})}).catch(e=>{console.log(e)})}},mutations:{setCurrentUser(e,t){e.currentUser=t},setUserProfile(e,t){e.userProfile=t},setPosts(e,t){e.posts=t||[]},setHiddenPosts(e,t){t?e.hiddenPosts.some(e=>e.id===t.id)||e.hiddenPosts.unshift(t):e.hiddenPosts=[]}}});s("NP2u");const w=s("vX5M");let P;o.a.config.productionTip=!1,w.auth.onAuthStateChanged(e=>{P||(P=new o.a({el:"#app",router:f,store:_,render:e=>e(r.default)}))})},NP2u:function(e,t){throw new Error("Module build failed: ModuleBuildError: Module build failed: Error: No PostCSS Config found in: /Users/edsadr/Sites/platzi-posts/src/assets/scss\n    at config.load.then (/Users/edsadr/Sites/platzi-posts/node_modules/postcss-load-config/src/index.js:55:15)\n    at <anonymous>\n    at runLoaders (/Users/edsadr/Sites/platzi-posts/node_modules/webpack/lib/NormalModule.js:195:19)\n    at /Users/edsadr/Sites/platzi-posts/node_modules/loader-runner/lib/LoaderRunner.js:364:11\n    at /Users/edsadr/Sites/platzi-posts/node_modules/loader-runner/lib/LoaderRunner.js:230:18\n    at context.callback (/Users/edsadr/Sites/platzi-posts/node_modules/loader-runner/lib/LoaderRunner.js:111:13)\n    at Promise.resolve.then.then.catch (/Users/edsadr/Sites/platzi-posts/node_modules/postcss-loader/lib/index.js:194:71)\n    at <anonymous>")},TGvd:function(e,t,s){"use strict";var o=s("aEfQ"),r=(s.n(o),s("YnS0")),n=s("VU/8")(o.default,r.a,!1,null,null,null);t.default=n.exports},YnS0:function(e,t,s){"use strict";var o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"dashboard"}},[s("section",[s("div",{staticClass:"col1"},[s("div",{staticClass:"profile"},[s("h5",[e._v(e._s(e.userProfile.name))]),e._v(" "),s("p",[e._v(e._s(e.userProfile.title))]),e._v(" "),s("div",{staticClass:"create-post"},[s("p",[e._v("Crear un post")]),e._v(" "),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.post.content,expression:"post.content",modifiers:{trim:!0}}],domProps:{value:e.post.content},on:{input:function(t){t.target.composing||e.$set(e.post,"content",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("button",{staticClass:"button",attrs:{disabled:""==e.post.content},on:{click:e.createPost}},[e._v("Crear")])])])])]),e._v(" "),s("div",{staticClass:"col2"},[s("transition",{attrs:{name:"fade"}},[e.hiddenPosts.length?s("div",{staticClass:"hidden-posts",on:{click:e.showNewPosts}},[s("p",[e._v("\n                        Click para ver mÃ¡s posts "),s("span",{staticClass:"new-posts"},[e._v(e._s(e.hiddenPosts.length))]),e._v(" "),e.hiddenPosts.length>1?s("span",[e._v("Nuevos posts")]):s("span",[e._v("Nuevo post")])])]):e._e()]),e._v(" "),e.posts.length?s("div",e._l(e.posts,function(t){return s("div",{staticClass:"post"},[s("h5",[e._v(e._s(t.userName))]),e._v(" "),s("span",[e._v(e._s(e._f("formatDate")(t.createdOn)))]),e._v(" "),s("p",[e._v(e._s(e._f("trimLength")(t.content)))]),e._v(" "),s("ul",[s("li",[s("a",{on:{click:function(s){e.openCommentModal(t)}}},[e._v("Comentarios "+e._s(t.comments))])]),e._v(" "),s("li",[s("a",{on:{click:function(s){e.likePost(t.id,t.likes)}}},[e._v("likes "+e._s(t.likes))])]),e._v(" "),s("li",[s("a",{on:{click:function(s){e.viewPost(t)}}},[e._v("Ver el post completo")])])])])})):s("div",[s("p",{staticClass:"no-results"},[e._v("No hay posts")])])],1)]),e._v(" "),s("transition",{attrs:{name:"fade"}},[e.showCommentModal?s("div",{staticClass:"c-modal"},[s("div",{staticClass:"c-container"},[s("a",{on:{click:e.closeCommentModal}},[e._v("X")]),e._v(" "),s("p",[e._v("Agregar un comentario")]),e._v(" "),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.comment.content,expression:"comment.content",modifiers:{trim:!0}}],domProps:{value:e.comment.content},on:{input:function(t){t.target.composing||e.$set(e.comment,"content",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("button",{staticClass:"button",attrs:{disabled:""==e.comment.content},on:{click:e.addComment}},[e._v("Agregar comentario")])])])]):e._e()]),e._v(" "),s("transition",{attrs:{name:"fade"}},[e.showPostModal?s("div",{staticClass:"p-modal"},[s("div",{staticClass:"p-container"},[s("a",{staticClass:"close",on:{click:e.closePostModal}},[e._v("X")]),e._v(" "),s("div",{staticClass:"post"},[s("h5",[e._v(e._s(e.fullPost.userName))]),e._v(" "),s("span",[e._v(e._s(e._f("formatDate")(e.fullPost.createdOn)))]),e._v(" "),s("p",[e._v(e._s(e.fullPost.content))]),e._v(" "),s("ul",[s("li",[s("a",[e._v("comments "+e._s(e.fullPost.comments))])]),e._v(" "),s("li",[s("a",[e._v("likes "+e._s(e.fullPost.likes))])])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.postComments.length,expression:"postComments.length"}],staticClass:"comments"},e._l(e.postComments,function(t){return s("div",{staticClass:"comment"},[s("p",[e._v(e._s(t.userName))]),e._v(" "),s("span",[e._v(e._s(e._f("formatDate")(t.createdOn)))]),e._v(" "),s("p",[e._v(e._s(t.content))])])}))])]):e._e()])],1)},staticRenderFns:[]};t.a=o},aEfQ:function(e,t){throw new Error("Module build failed: SyntaxError: Unexpected token (109:8)\n\n[0m [90m 107 | [39m    }[33m,[39m\n [90m 108 | [39m    computed[33m:[39m {\n[31m[1m>[22m[39m[90m 109 | [39m        [33m...[39mmapState([[32m'userProfile'[39m[33m,[39m [32m'currentUser'[39m[33m,[39m [32m'posts'[39m[33m,[39m [32m'hiddenPosts'[39m])\n [90m     | [39m        [31m[1m^[22m[39m\n [90m 110 | [39m    }[33m,[39m\n [90m 111 | [39m    methods[33m:[39m {\n [90m 112 | [39m        createPost() {[0m\n")},b69T:function(e,t,s){"use strict";var o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{attrs:{id:"settings"}},[s("div",{staticClass:"col1"},[s("h3",[e._v("ConfiguraciÃ³n")]),e._v(" "),s("p",[e._v("Actualice su perfil")]),e._v(" "),s("transition",{attrs:{name:"fade"}},[e.showSuccess?s("p",{staticClass:"success"},[e._v("Perfil actualizado")]):e._e()]),e._v(" "),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("label",{attrs:{for:"name"}},[e._v("Nombre")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.name,expression:"name",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:e.userProfile.name,id:"name"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("label",{attrs:{for:"title"}},[e._v("CompaÃ±Ã­a")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.title,expression:"title",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:e.userProfile.title,id:"title"},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("button",{staticClass:"button",on:{click:e.updateProfile}},[e._v("Actualizar perfil")])])],1)])},staticRenderFns:[]};t.a=o},dKg0:function(e,t,s){"use strict";var o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[this.currentUser?t("Navigation"):this._e(),this._v(" "),t("router-view")],1)},staticRenderFns:[]};t.a=o},niH5:function(e,t,s){"use strict";var o=s("JZSy"),r=(s.n(o),s("b69T")),n=s("VU/8")(o.default,r.a,!1,null,null,null);t.default=n.exports},vX5M:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.d(t,"db",function(){return a}),s.d(t,"auth",function(){return i}),s.d(t,"currentUser",function(){return m}),s.d(t,"usersCollection",function(){return l}),s.d(t,"postsCollection",function(){return c}),s.d(t,"commentsCollection",function(){return d}),s.d(t,"likesCollection",function(){return u});var o=s("Sazm"),r=s.n(o),n=s("3VHS");s.n(n);r.a.initializeApp({apiKey:"AIzaSyBEWML22pZs5J1Syi32oZ9sgcsbS1d6Qa4",authDomain:"platziposts.firebaseapp.com",databaseURL:"https://platziposts.firebaseio.com",projectId:"platziposts",storageBucket:"platziposts.appspot.com",messagingSenderId:"961097403115"});const a=r.a.firestore(),i=r.a.auth(),m=i.currentUser;a.settings({timestampsInSnapshots:!0});const l=a.collection("users"),c=a.collection("posts"),d=a.collection("comments"),u=a.collection("likes")},xJD8:function(e,t){throw new Error("Module build failed: SyntaxError: Unexpected token (15:8)\n\n[0m [90m 13 | [39m    components[33m:[39m { [33mNavigation[39m }[33m,[39m\n [90m 14 | [39m    computed[33m:[39m {\n[31m[1m>[22m[39m[90m 15 | [39m        [33m...[39mmapState([[32m'currentUser'[39m])\n [90m    | [39m        [31m[1m^[22m[39m\n [90m 16 | [39m    }\n [90m 17 | [39m}\n [90m 18 | [39m[0m\n")}},["NHnr"]);
//# sourceMappingURL=app.c2476fa91e84708b11e8.js.map